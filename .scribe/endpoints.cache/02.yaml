## Autogenerated by Scribe. DO NOT MODIFY.

name: 'Member Profiles'
description: ''
endpoints:
  -
    custom: []
    httpMethods:
      - GET
    uri: api/member-profiles/me
    metadata:
      custom: []
      groupName: 'Member Profiles'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Get current user profile'
      description: |-
        Retrieves the profile associated with the currently authenticated user.
        This is the primary endpoint for fetching user details for the dashboard/profile page.
      authenticated: true
      deprecated: false
    headers:
      Authorization: 'Bearer {YOUR_AUTH_KEY}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "id": 2,
              "user": {"id": 2, "username": "jane_doe", "email": "jane.doe@example.com"},
              "county": {"id": 1, "name": "Nairobi"},
              "first_name": "Jane",
              "last_name": "Doe",
              "gender": "female",
              "terms_accepted": true,
              "subscription_plan": {"name": "Basic", "price": 0}
            }
          }
        headers: []
        description: ''
      -
        custom: []
        status: 404
        content: |-
          {
            "success": false,
            "message": "Profile not found. Please create a profile first."
          }
        headers: []
        description: ''
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: api/member-profiles
    metadata:
      custom: []
      groupName: 'Member Profiles'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Create/Update current user profile'
      description: |-
        Creates a new profile for the authenticated user if one doesn't exist, or updates the existing one.
        This ensures the user has a linked profile record with necessary details like county and contact info.
      authenticated: true
      deprecated: false
    headers:
      Authorization: 'Bearer {YOUR_AUTH_KEY}'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      county_id:
        custom: []
        name: county_id
        description: 'County ID. Must correspond to a valid county.'
        required: true
        example: 47
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      first_name:
        custom: []
        name: first_name
        description: 'optional First name. Max 100 chars. Auto-filled from user name if empty.'
        required: false
        example: John
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      last_name:
        custom: []
        name: last_name
        description: 'optional Last name. Max 100 chars. Auto-filled if empty.'
        required: false
        example: Doe
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      phone:
        custom: []
        name: phone
        description: 'optional Phone number. Max 30 characters.'
        required: false
        example: '+254712345678'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      gender:
        custom: []
        name: gender
        description: 'optional Gender identity. One of: male, female, other.'
        required: false
        example: male
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      date_of_birth:
        custom: []
        name: date_of_birth
        description: 'optional Date of birth. Must be a past date.'
        required: false
        example: '1990-01-15'
        type: date
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      occupation:
        custom: []
        name: occupation
        description: 'optional Professional occupation. Max 255 chars.'
        required: false
        example: 'Software Developer'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      membership_type:
        custom: []
        name: membership_type
        description: "optional Desired membership plan (e.g., 'free', 'premium')."
        required: false
        example: free
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      emergency_contact_name:
        custom: []
        name: emergency_contact_name
        description: 'optional Name of emergency contact.'
        required: false
        example: 'Jane Doe'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      emergency_contact_phone:
        custom: []
        name: emergency_contact_phone
        description: 'optional Phone of emergency contact.'
        required: false
        example: '+254798765432'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      terms_accepted:
        custom: []
        name: terms_accepted
        description: 'Confirmation of T&C acceptance.'
        required: true
        example: true
        type: boolean
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      marketing_consent:
        custom: []
        name: marketing_consent
        description: 'optional Consent to receive marketing materials.'
        required: false
        example: false
        type: boolean
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      interests:
        custom: []
        name: interests
        description: 'optional List of user interests/tags.'
        required: false
        example:
          - technology
          - community
        type: 'string[]'
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      bio:
        custom: []
        name: bio
        description: 'optional Short biography. Max 1000 chars.'
        required: false
        example: 'Enthusiastic learner.'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      county_id: 47
      first_name: John
      last_name: Doe
      phone: '+254712345678'
      gender: male
      date_of_birth: '1990-01-15'
      occupation: 'Software Developer'
      membership_type: free
      emergency_contact_name: 'Jane Doe'
      emergency_contact_phone: '+254798765432'
      terms_accepted: true
      marketing_consent: false
      interests:
        - technology
        - community
      bio: 'Enthusiastic learner.'
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "message": "Profile updated successfully",
            "data": {
              "id": 2,
              "first_name": "Jane",
              "last_name": "Doe",
              "county_id": 1
            }
          }
        headers: []
        description: ''
      -
        custom: []
        status: 422
        content: |-
          {
            "message": "The county_id field is required.",
            "errors": {"county_id": ["The county_id field is required."]}
          }
        headers: []
        description: ''
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - GET
    uri: api/member-profiles
    metadata:
      custom: []
      groupName: 'Member Profiles'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'List all member profiles'
      description: |-
        Retrieves a paginated list of all member profiles.
        RESTRICTED: Only accessible by users with 'super_admin' or 'admin' roles.
        Supports filtering by county, membership type, and search by name/email.
      authenticated: true
      deprecated: false
    headers:
      Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters:
      county_id:
        custom: []
        name: county_id
        description: 'Filter by county ID.'
        required: false
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      membership_type:
        custom: []
        name: membership_type
        description: 'Filter by membership type name.'
        required: false
        example: premium
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      search:
        custom: []
        name: search
        description: 'Search by user name or email.'
        required: false
        example: john
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      page:
        custom: []
        name: page
        description: 'Page number for pagination.'
        required: false
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanQueryParameters:
      county_id: 1
      membership_type: premium
      search: john
      page: 1
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "current_page": 1,
              "data": [
                {
                  "id": 1,
                  "user": {"id": 1, "username": "superadmin", "email": "superadmin@dadisilab.com"},
                  "county": {"id": 1, "name": "Nairobi"},
                  "first_name": "Super",
                  "last_name": "Admin",
                  "terms_accepted": true,
                  "created_at": "2025-01-01T12:00:00Z"
                }
              ],
              "total": 5,
              "per_page": 20
            }
          }
        headers: []
        description: 'Admin Access'
      -
        custom: []
        status: 403
        content: |-
          {
            "success": false,
            "message": "Unauthorized to view all profiles"
          }
        headers: []
        description: ''
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - GET
    uri: 'api/member-profiles/{id}'
    metadata:
      custom: []
      groupName: 'Member Profiles'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Get specific profile details'
      description: |-
        Retrieves details for a specific profile by ID.
        - Users can always view their own profile (if ID matches or if ID is omitted, though `me` endpoint is preferred for that).
        - Admins can view any user's profile.
        - Access is denied if a regular user tries to view another user's profile.
      authenticated: true
      deprecated: false
    headers:
      Authorization: 'Bearer {YOUR_AUTH_KEY}'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        custom: []
        name: id
        description: "optional The ID of the profile to view. If omitted, defaults to the authenticated user's profile."
        required: false
        example: 123
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanUrlParameters:
      id: 123
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "data": {
              "id": 1,
              "user": {"name": "John Doe", "email": "john@example.com"},
              "county": {"name": "Nairobi"},
              "first_name": "John",
              "last_name": "Doe",
              "gender": "male",
              "terms_accepted": true
            }
          }
        headers: []
        description: ''
      -
        custom: []
        status: 403
        content: |-
          {
            "success": false,
            "message": "Unauthorized to view this profile"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 404
        content: |-
          {
            "success": false,
            "message": "Profile not found"
          }
        headers: []
        description: ''
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - PUT
    uri: 'api/member-profiles/{id}'
    metadata:
      custom: []
      groupName: 'Member Profiles'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Update specific profile'
      description: |-
        Updates an existing profile by ID.
        - Regular users can only update their own profile.
        - Admins ('super_admin', 'admin') can update any profile.
      authenticated: true
      deprecated: false
    headers:
      Authorization: 'Bearer {YOUR_AUTH_KEY}'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        custom: []
        name: id
        description: 'The ID of the profile to update.'
        required: true
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanUrlParameters:
      id: 1
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      county_id:
        custom: []
        name: county_id
        description: 'optional County ID.'
        required: false
        example: 1
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      phone:
        custom: []
        name: phone
        description: 'optional Phone number.'
        required: false
        example: '+254712345678'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      gender:
        custom: []
        name: gender
        description: 'optional Gender.'
        required: false
        example: female
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      occupation:
        custom: []
        name: occupation
        description: 'optional New occupation.'
        required: false
        example: 'Project Manager'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
      bio:
        custom: []
        name: bio
        description: 'optional Biography.'
        required: false
        example: 'Updated bio text.'
        type: string
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanBodyParameters:
      county_id: 1
      phone: '+254712345678'
      gender: female
      occupation: 'Project Manager'
      bio: 'Updated bio text.'
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "message": "Profile updated successfully",
            "data": {
              "id": 1,
              "user": {"name": "John Doe"},
              "county": {"name": "Nairobi"},
              "occupation": "Project Manager"
            }
          }
        headers: []
        description: ''
      -
        custom: []
        status: 403
        content: |-
          {
            "success": false,
            "message": "Unauthorized to update this profile"
          }
        headers: []
        description: ''
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - DELETE
    uri: 'api/member-profiles/{id}'
    metadata:
      custom: []
      groupName: 'Member Profiles'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Delete a profile'
      description: |-
        Permanently deletes a member profile.
        RESTRICTED: Only admins can delete profiles, but they cannot delete their own profile via this endpoint.
      authenticated: true
      deprecated: false
    headers:
      Authorization: 'Bearer {YOUR_AUTH_KEY}'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        custom: []
        name: id
        description: 'The unique ID of the profile to delete.'
        required: true
        example: 123
        type: integer
        enumValues: []
        exampleWasSpecified: true
        nullable: false
        deprecated: false
    cleanUrlParameters:
      id: 123
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "message": "Profile deleted successfully"
          }
        headers: []
        description: ''
      -
        custom: []
        status: 403
        content: |-
          {
            "success": false,
            "message": "Cannot delete profile"
          }
        headers: []
        description: ''
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: api/member-profiles/profile-picture
    metadata:
      custom: []
      groupName: 'Member Profiles'
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 'Upload profile picture'
      description: |-
        Uploads and updates the authenticated user's profile picture.
        Replaces any existing picture.
      authenticated: true
      deprecated: false
    headers:
      Authorization: 'Bearer {YOUR_AUTH_KEY}'
      Content-Type: multipart/form-data
      Accept: application/json
    urlParameters: []
    cleanUrlParameters: []
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters:
      profile_picture:
        custom: []
        name: profile_picture
        description: 'The image file (jpeg, png, jpg, gif). Max 2MB.'
        required: true
        example: null
        type: file
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        deprecated: false
    cleanBodyParameters: []
    fileParameters:
      profile_picture: null
    responses:
      -
        custom: []
        status: 200
        content: |-
          {
            "success": true,
            "message": "Profile picture updated successfully",
            "data": {
              "profile_picture_url": "https://api.dadisilab.com/storage/profile-pictures/jane_doe_avatar.jpg"
            }
          }
        headers: []
        description: ''
    responseFields: []
    auth:
      - headers
      - Authorization
      - 'Bearer 6g43cv8PD1aE5beadkZfhV6'
    controller: null
    method: null
    route: null
